- name: Install Third Party Software
  hosts: all
  vars:
    ansible_port: 5986
    ansible_connection: winrm

  tasks:
    - name: install Chocolatey
      win_chocolatey:
        name: chocolatey
        state: present

    - name: disable enhanced exit codes
      win_chocolatey_feature:
        name: useEnhancedExitCodes
        state: disabled

    - name: install Visual Studio Code, Git, and Putty
      win_chocolatey:
        name: "{{ item }}"
        ignore_checksums: true
      with_items:
        - visualstudiocode
        - git
        - googlechrome

    - name: install an app
      win_chocolatey:
        name: "{{ windows_app_name }}"
        state: latest